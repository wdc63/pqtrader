# QTraderğŸ“ˆ

<p align="center">
  <b>è½»é‡åŒ– Â· äº‹ä»¶é©±åŠ¨ Â· æ•°æ®è§£è€¦</b><br/>
  ä¸€ä¸ªä¸“æ³¨äºç­–ç•¥ç ”ç©¶ä¸æ‰§è¡Œé—­ç¯çš„é‡åŒ–å›æµ‹ / æ¨¡æ‹Ÿäº¤æ˜“æ¡†æ¶
</p>

---

## ä¸ºä»€ä¹ˆæ˜¯ QTraderï¼ŸğŸ¤”

å¾ˆå¤šç°æœ‰çš„é‡åŒ–å›æµ‹/æ¨¡æ‹Ÿç³»ç»Ÿè¦ä¹ˆè¿‡åº¦â€œé‡é‡åŒ–â€ï¼Œè¦ä¹ˆæŠŠæ ¸å¿ƒèƒ½åŠ›ç»‘å®šåˆ°æŸä¸ªæ•°æ®å¹³å°/æ”¶è´¹æ•°æ®æœåŠ¡ï¼ˆç”šè‡³â€œæŒ‚ç¾Šå¤´å–ç‹—è‚‰â€ï¼‰ã€‚

QTrader çš„ç›®æ ‡æ˜¯åè¿‡æ¥ï¼š

- âœ… **æ¡†æ¶åªè´Ÿè´£**ï¼šäº‹ä»¶é©±åŠ¨å›æµ‹/æ¨¡æ‹Ÿã€æ’®åˆã€è´¦æˆ·/æŒä»“ã€ç»©æ•ˆåˆ†æã€æŠ¥å‘Šä¸å¯è§†åŒ–
- ğŸ”Œ **æ•°æ®å®Œå…¨å¤–ç½®**ï¼šé€šè¿‡ **Data Contractï¼ˆæ•°æ®åˆçº¦/æ¥å£ï¼‰**è·å–å›æµ‹æ‰€éœ€çš„æœ€å°æ•°æ®é›†
- ğŸ§± **æŒ‰éœ€ä¼¸ç¼©**ï¼šä½ å¯ä»¥æ›¿æ¢æ•°æ®æºå®ç°ï¼ˆCSV / æ•°æ®åº“ / åœ¨çº¿ API / è‡ªå»ºæœåŠ¡ï¼‰ï¼Œä¸ç”¨æ”¹æ¡†æ¶æ ¸å¿ƒ

> é€‚åˆï¼šæƒ³è¦ä¸€ä¸ªâ€œå¹²å‡€ã€å¯æ§ã€å¯æ‰©å±•â€çš„ç ”ç©¶æ¡†æ¶ï¼›ä¸æƒ³æŠŠç­–ç•¥ç ”ç©¶ç»‘æ­»åœ¨æŸä¸ªå¹³å°æˆ–åºå¤§ç³»ç»Ÿé‡Œçš„å¼€å‘è€…ã€‚

---

## ç‰¹æ€§ä¸€è§ˆ âœ¨

- âš™ï¸ **äº‹ä»¶é©±åŠ¨æ¶æ„**ï¼šè´´è¿‘çœŸå®äº¤æ˜“æµç¨‹ï¼ˆæŒ‰æ—¥ / åˆ†é’Ÿ / Tick äº‹ä»¶å¾ªç¯ï¼‰
- ğŸ§  **ç­–ç•¥ä¸æ¡†æ¶åˆ†ç¦»**ï¼šç­–ç•¥åªå†™äº¤æ˜“é€»è¾‘ï¼Œåº•å±‚æ’®åˆ/è®°è´¦ç”±æ¡†æ¶å®Œæˆ
- ğŸ’¾ **çŠ¶æ€æŒä¹…åŒ–**ï¼ˆå¯æš‚åœ/æ¢å¤/åˆ†å‰ï¼‰ï¼šæ”¯æŒå›æµ‹è¿‡ç¨‹ä¿å­˜çŠ¶æ€å¹¶ç»§ç»­
- ğŸ”Œ **æ•°æ®æ¥å…¥å¯æ’æ‹”**ï¼šæ ‡å‡†æ¥å£æ¥å…¥ä»»æ„æ•°æ®æº
- ğŸ“Š **ç»“æœåˆ†æä¸æŠ¥å‘Š**ï¼šå‡€å€¼æ›²çº¿ã€äº¤æ˜“è®°å½•ã€å…³é”®æŒ‡æ ‡ï¼ˆå¤æ™®ã€å›æ’¤ç­‰ï¼‰
- ğŸ–¥ï¸ **å†…ç½®ç›‘æ§/å¯è§†åŒ–**ï¼šä¾¿äºè§‚å¯Ÿå›æµ‹è¿‡ç¨‹ä¸ç»“æœ

---

## é¡¹ç›®ç»“æ„ ğŸ§­

```text
.
â”œâ”€â”€ src/              # æ¡†æ¶æºç 
â”œâ”€â”€ examples/         # ç®€è¦ç¤ºä¾‹ï¼ˆè™šæ‹Ÿæ•°æ®æºï¼‰
â”œâ”€â”€ tests/            # æµ‹è¯•
â”œâ”€â”€ screenshot/       # README æˆªå›¾
â”œâ”€â”€ pyproject.toml
â””â”€â”€ USER_GUIDE.md     # ç”¨æˆ·æ–‡æ¡£
```

---

## æ¶æ„ç¤ºæ„å›¾ ğŸ—ºï¸

```mermaid
flowchart LR
  A[Config / Workspace] --> B[Engine]
  B --> C[Scheduler / Lifecycle]
  C --> D[Strategy]
  C --> E[DataProvider]
  C --> F[OrderManager]
  F --> G[MatchingEngine]
  G --> H[Account / Positions]
  H --> I[Performance & Report]
  B --> J[Monitoring Server]
```

---

## å›æµ‹ç»“æœæˆªå›¾ğŸ–¼ï¸

![Screenshot 1](screenshot/screenshot1.png)
![Screenshot 2](screenshot/screenshot2.png)
![Screenshot 3](screenshot/screenshot3.png)
![Screenshot 4](screenshot/screenshot4.png)

---

## å¿«é€Ÿå¼€å§‹ ğŸš€

### 1) ç¯å¢ƒ

- Python >= 3.9

å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆvenv/conda å‡å¯ï¼‰ã€‚

### 2) å®‰è£…

```bash
python -m pip install -U pip
python -m pip install -e .
```

> æ³¨æ„ï¼šæŸäº›ç³»ç»Ÿçš„ `python` å¯èƒ½æ˜¯ `python3`ã€‚

### 3) è·‘ä¸€ä¸ªæœ€å°å›æµ‹ï¼ˆå¯å¤åˆ¶ç²˜è´´ï¼‰âœ…

æœ¬ä»“åº“å·²ç»æä¾›äº†ä¸€ä¸ªç«¯åˆ°ç«¯ç¤ºä¾‹ï¼š

- ç­–ç•¥ï¼š`examples/simple_ma/strategy.py`
- æ•°æ®æºï¼ˆMockï¼‰ï¼š`examples/simple_ma/data_provider.py`
- é…ç½®ï¼š`examples/simple_ma/config_backtest.yaml`
- å…¥å£ï¼š`examples/simple_ma/run.py`

ç›´æ¥è¿è¡Œï¼š

```bash
cd examples/simple_ma
python run.py
```

è¯´æ˜ï¼š

- `run.py` é‡ŒåŒ…å«å¤šç§æ¨¡å¼ï¼ˆå…¨æ–°å›æµ‹ / æ¨¡æ‹Ÿç›˜ / æ¢å¤ / åˆ†å‰ï¼‰ï¼Œä½ å¯ä»¥æŒ‰æ³¨é‡Šåˆ‡æ¢ã€‚
- é»˜è®¤ä¼šå¯ç”¨ Web ç›‘æ§æœåŠ¡ï¼ˆè§é…ç½® `server.port`ï¼‰ï¼Œè·‘èµ·æ¥åæµè§ˆå™¨èƒ½çœ‹åˆ°è¿‡ç¨‹ä¸æŒ‡æ ‡ã€‚

---

## 1 åˆ†é’Ÿç†è§£é…ç½®ï¼ˆYAMLï¼‰âš™ï¸

é…ç½®æ–‡ä»¶æ˜¯â€œæ€»å¼€å…³â€ï¼Œå¸¸ç”¨é¡¹å¦‚ä¸‹ï¼ˆå®Œæ•´ç¤ºä¾‹è§ `examples/simple_ma/config_backtest.yaml`ï¼‰ï¼š

```yaml
engine:
  mode: backtest
  frequency: minute
  start_date: "2023-01-01"
  end_date: "2023-10-31"

account:
  initial_cash: 1000000
  trading_rule: "T+1"

matching:
  slippage:
    type: fixed
    rate: 0.001
  commission:
    buy_commission: 0.0002
    sell_commission: 0.0002

server:
  enable: true
  port: 8050
```

---

## æ•°æ®åˆçº¦ï¼ˆData Contractï¼‰æ€ä¹ˆå®ç°ï¼ŸğŸ”Œ

QTrader çš„æ•°æ®è§£è€¦æ ¸å¿ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼š`src/qtrader/data/interface.py`ã€‚

ä½ åªè¦å®ç°è¿™ 3 ä¸ªæ–¹æ³•ï¼Œå°±èƒ½æŠŠä»»æ„æ•°æ®æºæ¥è¿›æ¥ï¼š

- `get_trading_calendar(start, end)`ï¼šäº¤æ˜“æ—¥å†
- `get_current_price(symbol, dt)`ï¼šæŸæ—¶åˆ»ä»·æ ¼å¿«ç…§
- `get_symbol_info(symbol, date)`ï¼šæ ‡çš„é™æ€ä¿¡æ¯ï¼ˆå¦‚åœç‰Œ/åç§°ï¼‰

ç¤ºä¾‹ï¼ˆMock æ•°æ®æºï¼Œä»“åº“å·²æä¾›ï¼‰ï¼š`examples/simple_ma/data_provider.py`

```python
from qtrader.data.interface import AbstractDataProvider

class MyDataProvider(AbstractDataProvider):
    def get_trading_calendar(self, start: str, end: str) -> list[str]:
        ...

    def get_current_price(self, symbol: str, dt):
        return {"current_price": 10.0}

    def get_symbol_info(self, symbol: str, date: str):
        return {"symbol_name": symbol, "is_suspended": False}
```

---

## æ•°æ®åˆçº¦ï¼ˆData Contractï¼‰ç†å¿µ ğŸ§©

QTrader ä¸å†…ç½®ä»»ä½•â€œæ•°æ®å¹³å°ç»‘å®šâ€ã€‚æ¡†æ¶åªä¾èµ–ä¸€ä¸ªæŠ½è±¡çš„æ•°æ®æä¾›è€…æ¥å£ï¼ˆData Providerï¼‰ã€‚è¿è¡Œæ—¶é€šè¿‡è¯¥æ¥å£æ‹‰å–ï¼š

- ğŸ“… äº¤æ˜“æ—¥å†
- ğŸ’° å½“å‰/å†å²ä»·æ ¼ï¼ˆæŒ‰é¢‘ç‡ï¼‰
- ğŸ·ï¸ æ ‡çš„åŸºç¡€ä¿¡æ¯ï¼ˆåœç‰Œã€åç§°ç­‰ï¼‰

ä½ å¯ä»¥å®ç°è‡ªå·±çš„ `DataProvider`ï¼šCSV / æœ¬åœ°æ•°æ®åº“ / åœ¨çº¿ API / è‡ªå»ºè¡Œæƒ…å› å­æœåŠ¡éƒ½å¯ä»¥ã€‚

---

## æ–‡æ¡£ ğŸ“š

- âœ… å®Œæ•´ç”¨æˆ·æ–‡æ¡£ï¼š`USER_GUIDE.md`
- ğŸ§  è®¾è®¡ç¬”è®°ï¼š`design/design_v7.md`

---

## License ğŸ“„

MIT Licenseï¼ˆè§ `LICENSE`ï¼‰ã€‚
